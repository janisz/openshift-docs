[id="monitor-acs"]
= Monitoring {product-title-short}
include::modules/common-attributes.adoc[]
:context: monitor-acs

toc::[]

== Monitoring with {osp}

[role="_abstract"]
link:https://docs.openshift.com/container-platform/4.13/monitoring/monitoring-overview.html[{ocp}] includes a preconfigured,
preinstalled, and self-updating monitoring stack that provides monitoring for core platform components.
{product-title-short} exposes metrics to {osp} monitoring via an encrypted and authenticated endpoint.

[IMPORTANT]
====
If you have previously configured monitoring with the Prometheus Operator,
consider removing your custom ServiceMonitor resources. {product-title-short} ships with a pre-configured ServiceMonitor for {osp} monitoring.
Multiple ServiceMonitors may result in duplicated scraping.
====

include::modules/enable-openshift-monitoring-central-operator.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../installing/installing_ocp/install-central-config-options-ocp.adoc#install-central-config-options-ocp[Central configuration options using the Operator]

include::modules/enable-openshift-monitoring-central-helm.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../installing/installing_other/install-central-other.adoc#change-config-options-after-deployment-central-services_install-central-other[Changing configuration options after deploying the central-services Helm chart]

== Monitoring with custom Prometheus

[role="_abstract"]
link:https://prometheus.io/[Prometheus] is an open-source monitoring and alerting platform.
You can use it to monitor health and availability of Central and Sensor components of {rh-rhacs-first}. When you enable monitoring, {product-title-short} creates a new monitoring service on port number 9090 and a network policy allowing inbound connections to that port.

[NOTE]
====
This monitoring service exposes an endpoint that is not encrypted by TLS and has no authorization.
Use this only when you do not want to use {osp} monitoring.
====

include::modules/enable-monitoring-central-operator.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../installing/installing_ocp/install-central-config-options-ocp.adoc#install-central-config-options-ocp[Central configuration options using the Operator]

include::modules/enable-monitoring-central-helm.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../installing/installing_other/install-central-other.adoc#change-config-options-after-deployment-central-services_install-central-other[Changing configuration options after deploying the central-services Helm chart]

include::modules/prometheus-service-monitor.adoc[leveloffset=+1]

include::modules/enable-monitoring-manual.adoc[leveloffset=+1]

include::modules/enable-monitoring-customize-port.adoc[leveloffset=+1]
